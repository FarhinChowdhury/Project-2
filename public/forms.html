<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <title>Product Input Page</title>
</head>

<body>
    <div class=container>

        <form action="#" method="POST" onsubmit="return validateForm()">
            <div class="form-group">
                <label>Name of Product:</label>
                <input type="text" class="form-control" id="product" required>
            </div>
            <div class="form-group">
                <label>Description:</label>
                <textarea class="form-control" id="desc" rows="3" required></textarea>
            </div>
            <select class="custom-select" id="category">
                <option selected>Select Category</option>
                <option value="Fashion">Fashion</option>
                <option value="Electronics">Electronics</option>
                <option value="Collectibles">Collectibles</option>
                <option value="Toys">Toys</option>
            </select><br><br>
            <div class="form-group">
                <label>Starting Bid:</label>
                <div class="input-group-prepend">
                    <span class="input-group-text">$</span>
                    <input type="text" class="form-control" id="startingBid" required>
                </div>
            </div>
            <div class="form-group">
                <label>Upload Image:</label>
                <input type="file" class="form-control-file" id="uploadImage" required>
            </div>
            <button type="submit" class="btn btn-primary">Submit</button>
        </form>

    </div>


    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        crossorigin="anonymous"></script>
    <script>
        function validateForm() {

            event.preventDefault();

            // variables for form values
            const name = $('#product').val();
            const desc = $('#desc').val();
            const selection = $('#category').val();
            let bid = $("#startingBid").val();

            if (name.trim() == '' || name.length > 50) {
                alert("Please enter a product name of no more than 50 characters.")
                return false;
            }

            if (desc.trim() == '' || desc.length > 200) {
                alert("Please enter a description of no more than 200 characters.")
                return false;
            }

            if (selection == "Select Category") {
                alert("Please choose a category.");
                return false;
            }

            if (bid.trim() == '' || isNaN(bid)) {
                alert("Please enter a number.");
                return false;
            }
            bid = parseFloat(bid).toFixed(2); // parse float to two decimal places

            if (validateFile() == false) {
                alert("Please upload a .jpg or .png file.");
                return false;
            }
            return true; // form submitted
        }


        function validateFile() {

            const fileName = $('#uploadImage').val();
            const allowed_extensions = new Array("jpg", "png");
            const file_extension = fileName.split('.').pop().toLowerCase(); // split the filename by dot(.), and pop the last element from the array which will give you the extension as well. If there will be no extension then it will return the filename.

            for (let i = 0; i <= allowed_extensions.length; i++) {
                if (allowed_extensions[i] == file_extension) {
                    return true; // valid file type
                }
            }
            return false;
        }
    </script>
</body>

</html>